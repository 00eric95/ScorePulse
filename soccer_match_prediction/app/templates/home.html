{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}

<div class="relative overflow-hidden border-b border-white/5 pb-20 pt-24 lg:pt-32">
    <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] mix-blend-overlay"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-brand-accent/20 rounded-full blur-[120px] pointer-events-none"></div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 z-10 text-center">
        
        <span class="inline-block py-1.5 px-4 rounded-full bg-brand-accent/10 text-brand-accent text-xs font-bold uppercase tracking-widest border border-brand-accent/20 mb-8 backdrop-blur-sm">
            <i class="fas fa-robot mr-2"></i> AI-Powered Intelligence
        </span>
        
        <h1 class="text-5xl md:text-7xl font-black text-white tracking-tighter mb-8 leading-tight drop-shadow-2xl">
            PREDICT THE <br>
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-brand-accent to-blue-500">UNPREDICTABLE</span>
        </h1>
        
        <div class="flex flex-col sm:flex-row justify-center gap-5">
            <a href="{{ url_for('predict') }}" class="px-8 py-4 bg-brand-accent text-brand-dark text-lg font-bold rounded-xl shadow-[0_0_20px_rgba(0,242,195,0.4)] transition hover:scale-105 hover:shadow-[0_0_30px_rgba(0,242,195,0.6)]">
                Start Analysis <i class="fas fa-bolt ml-2"></i>
            </a>
            {% if not current_user.is_authenticated %}
            <a href="{{ url_for('register') }}" class="px-8 py-4 glass text-white text-lg font-bold rounded-xl hover:bg-white/10 transition">
                Create Account
            </a>
            {% endif %}
        </div>
    </div>
</div>

<div class="relative z-20 -mt-10 max-w-7xl mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="glass p-6 rounded-2xl border border-white/10 shadow-xl backdrop-blur-xl">
            <div class="w-12 h-12 bg-brand-dark/50 rounded-lg flex items-center justify-center mb-4 text-brand-accent border border-white/5">
                <i class="fas fa-brain text-xl"></i>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Neural Networks</h3>
            <p class="text-sm text-brand-muted">PyTorch models detecting patterns in 10+ years of data.</p>
        </div>
        <div class="glass p-6 rounded-2xl border border-white/10 shadow-xl backdrop-blur-xl">
            <div class="w-12 h-12 bg-brand-dark/50 rounded-lg flex items-center justify-center mb-4 text-brand-orange border border-white/5">
                <i class="fas fa-database text-xl"></i>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Live Data</h3>
            <p class="text-sm text-brand-muted">Real-time ELO ratings and team form analysis.</p>
        </div>
        <div class="glass p-6 rounded-2xl border border-white/10 shadow-xl backdrop-blur-xl">
            <div class="w-12 h-12 bg-brand-dark/50 rounded-lg flex items-center justify-center mb-4 text-blue-400 border border-white/5">
                <i class="fas fa-chart-pie text-xl"></i>
            </div>
            <h3 class="text-lg font-bold text-white mb-2">Instant Probabilities</h3>
            <p class="text-sm text-brand-muted">Win/Draw/Loss % calculated in milliseconds.</p>
        </div>
    </div>
</div>

<div class="py-20">
    <div class="max-w-6xl mx-auto px-4">
        
        <div class="flex items-center justify-between mb-10 border-b border-white/10 pb-4">
            <h2 class="text-3xl font-bold text-white flex items-center gap-3">
                <span class="text-brand-accent"><i class="fas fa-calendar-alt"></i></span> 
                Match Center
            </h2>
            <span class="text-xs text-brand-muted font-mono uppercase tracking-widest bg-white/5 px-3 py-1 rounded">Next 7 Days</span>
        </div>

        {% if matches %}
            {% set league_map = {
                'E0': {'name': 'Premier League', 'flag': 'gb-eng', 'country': 'England'},
                'E1': {'name': 'Championship', 'flag': 'gb-eng', 'country': 'England'},
                'E2': {'name': 'League One', 'flag': 'gb-eng', 'country': 'England'},
                'SP1': {'name': 'La Liga', 'flag': 'es', 'country': 'Spain'},
                'SP2': {'name': 'Segunda Division', 'flag': 'es', 'country': 'Spain'},
                'D1': {'name': 'Bundesliga', 'flag': 'de', 'country': 'Germany'},
                'D2': {'name': '2. Bundesliga', 'flag': 'de', 'country': 'Germany'},
                'I1': {'name': 'Serie A', 'flag': 'it', 'country': 'Italy'},
                'I2': {'name': 'Serie B', 'flag': 'it', 'country': 'Italy'},
                'F1': {'name': 'Ligue 1', 'flag': 'fr', 'country': 'France'},
                'F2': {'name': 'Ligue 2', 'flag': 'fr', 'country': 'France'},
                'N1': {'name': 'Eredivisie', 'flag': 'nl', 'country': 'Netherlands'},
                'B1': {'name': 'Pro League', 'flag': 'be', 'country': 'Belgium'},
                'P1': {'name': 'Liga Portugal', 'flag': 'pt', 'country': 'Portugal'},
                'T1': {'name': 'Super Lig', 'flag': 'tr', 'country': 'Turkey'},
                'SC0': {'name': 'Premiership', 'flag': 'gb-sct', 'country': 'Scotland'},
                'SC1': {'name': 'Championship', 'flag': 'gb-sct', 'country': 'Scotland'},
                'G1': {'name': 'Super League', 'flag': 'gr', 'country': 'Greece'},
                'NOR': {'name': 'Eliteserien', 'flag': 'no', 'country': 'Norway'},
                'AUT': {'name': 'Bundesliga', 'flag': 'at', 'country': 'Austria'},
                'DEN': {'name': 'Superliga', 'flag': 'dk', 'country': 'Denmark'},
                'SWE': {'name': 'Allsvenskan', 'flag': 'se', 'country': 'Sweden'},
                'POL': {'name': 'Ekstraklasa', 'flag': 'pl', 'country': 'Poland'},
                'ROM': {'name': 'Liga I', 'flag': 'ro', 'country': 'Romania'},
                'FIN': {'name': 'Veikkausliiga', 'flag': 'fi', 'country': 'Finland'},
                'RUS': {'name': 'Premier League', 'flag': 'ru', 'country': 'Russia'}
            } %}

            {% for league_code, games in matches|groupby('league') %}
                {% set info = league_map.get(league_code, {'name': league_code, 'flag': 'world', 'country': 'World'}) %}
                
                <div class="mb-12 animate-fade-in-up">
                    <div class="flex items-center gap-4 mb-6 pl-4 border-l-4 border-brand-accent">
                        <span class="text-3xl filter drop-shadow-lg" title="{{ info.country }}">
                            {% if info.flag == 'gb-eng' %}ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿{% elif info.flag == 'es' %}ğŸ‡ªğŸ‡¸{% elif info.flag == 'de' %}ğŸ‡©ğŸ‡ª{% elif info.flag == 'it' %}ğŸ‡®ğŸ‡¹{% elif info.flag == 'fr' %}ğŸ‡«ğŸ‡·{% elif info.flag == 'nl' %}ğŸ‡³ğŸ‡±{% elif info.flag == 'pt' %}ğŸ‡µğŸ‡¹{% elif info.flag == 'tr' %}ğŸ‡¹ğŸ‡·{% elif info.flag == 'gb-sct' %}ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿{% else %}âš½{% endif %}
                        </span>
                        <div>
                            <h3 class="text-white font-bold text-xl tracking-wide">{{ info.name }}</h3>
                            <p class="text-[10px] text-brand-muted uppercase tracking-widest font-bold">{{ info.country }}</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-4">
                        {% for match in games %}
                        <div class="group glass rounded-xl p-0 hover:border-brand-accent/50 transition duration-300 flex items-stretch shadow-lg relative overflow-hidden">
                            
                            <div class="flex flex-col justify-center items-center gap-1 w-20 bg-black/20 border-r border-white/5 p-2 text-center">
                                <span class="text-xs text-brand-accent font-bold uppercase">{{ match.date[5:7] }}/{{ match.date[8:10] }}</span>
                                <span class="text-[10px] text-brand-muted font-mono">20:45</span>
                            </div>

                            <div class="flex-1 px-5 py-4 flex flex-col justify-center">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-white font-bold text-sm tracking-wide">{{ match.home }}</span>
                                    {% if match.home_score is defined %}
                                        <span class="font-mono text-brand-accent">{{ match.home_score }}</span>
                                    {% endif %}
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-white font-bold text-sm tracking-wide">{{ match.away }}</span>
                                    {% if match.away_score is defined %}
                                        <span class="font-mono text-brand-accent">{{ match.away_score }}</span>
                                    {% endif %}
                                </div>
                            </div>

                            <a href="{{ url_for('predict', home_team=match.home, away_team=match.away) }}" class="w-16 bg-white/5 hover:bg-brand-accent hover:text-brand-dark text-brand-accent transition flex items-center justify-center border-l border-white/5 group-hover:border-l-0">
                                <i class="fas fa-chart-pie text-xl transform group-hover:scale-110 transition"></i>
                            </a>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}

        {% else %}
            <div class="p-16 text-center glass rounded-3xl border border-dashed border-white/10">
                <div class="w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-6">
                    <i class="fas fa-calendar-times text-4xl text-brand-muted"></i>
                </div>
                <h3 class="text-white font-bold text-2xl mb-2">No Upcoming Matches</h3>
                <p class="text-brand-muted text-sm">Our AI is scanning for the next schedule updates.</p>
            </div>
        {% endif %}

    </div>
</div>

{% endblock %}